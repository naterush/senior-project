<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://getbootstrap.com/dist/css/bootstrap.css">
	<style type="text/css">
		body{
			background-color: lime;
			text-align: center;
		}
		.form-title {
			font-size: large;
		}
		.add-form {
			align-self: center;
			margin: 0 auto;
			max-width: 320px;
			border: 3px solid black;
			border-radius: 10px;
		}
		.f-item {
			margin: 5px;
		}
	</style>
	
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyAhWogeZ5mswxqfmc_ZkG4Ty8DwSx9K2m4"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript">
     	// Function creates new Google Map, installs it in the 'map' DIV
		var map;
      	var loadMap = function() {
	        var myOptions = {
	          center: new google.maps.LatLng(39.952335, -75.163789),
	          zoom: 11,
	          mapTypeId: google.maps.MapTypeId.ROADMAP
	    	};
        	map = new google.maps.Map(document.getElementById("map"), myOptions);
        	//Map Listener for left click NOT ON marker; should place coords in form
        	map.addListener('click', function(mouse) {
        		var latLng = mouse.latLng;
        		var lat = latLng.lat;
        		var long = latLng.lng;
        		document.addForm.longitude.value = long();
        		document.addForm.latitude.value = lat();
        	});
        	//Start the refresh cycle
        	$(document).ready(function() {
				setTimeout(refreshMap, 5000); //5 seconds
			});
        	
      	};
      	
      	// Assign the 'onload' property of the main window to function loadMap()
	  	// Thus, loadMap() called as soon as browser loads
	    window.onload = loadMap;
      	
      	//Function to check if new markers need to be added/deleted
      	var refreshMap = function() {
      		console.log("Refreshing map");
 			
 			//TODO: ADD HEATMAP OVERLAY ONTO MAP

      		setTimeout(refreshMap, 5000); //5 seconds
      		return;
      	}
	</script>
	
	<style>
		table, th, td {
		    border: 1px solid black;
		}
	</style>
	<style>
		 #map {
		   width: 75%;
		   margin: 0 auto;
		   height: 400px;
		   background-color: grey;
		 }
	</style>
</head>
<body>
	<h1>Sapling Map</h1>
	<div id="map" style="width:800px;height:500px;"></div>
  <p> 
  <div class="form-title">
  Current Latitude and Longitude:
  </div>
  <form class="add-form" name="addForm" action="" method="post" onsubmit="return 0">
	    <input class="f-item" type="text" name="longitude" placeholder=" Longitude" value>
	    <input class="f-item" type="text" name="latitude" placeholder = " Latitude">
  </form>
  <p>
  <font color="blue"> <p><a href="/logout"> Logout</a>
</body>
</html>